# Тестовый API на FastAPI.
Этот проект представляет собой API для управления постами, созданный с использованием FastAPI и SQLAlchemy. Он предоставляет функциональность для создания , обновления, удаления и получения постов, а также для управления лайками к постам.
___

## Установка проекта
**Предварительные требования:**

* Python 3.7 или выше
* PostgreSQL
* Docker
* Docker Compose
* Git
* Установленные зависимости из requirements.txt

Клонировать проект через GitHub - https://github.com/VladimirHehe/TESTDEV

## Настройка проекта
1. _Установить все зависимости:_
```bash
pip install -r requirements.txt
```
2. _Настройка базы данных
Перед запуском приложения необходимо настроить базу данных. Убедитесь, что PostgreSQL установлен и работает. Создайте базу данных, которая будет использоваться приложением._


3. _Создайте файл .env в корневом каталоге проекта и добавьте следующие переменные окружения:_

```
DB_USER=<ваш_пользователь>
DB_PASS=<ваш_пароль>
DB_HOST=<ваш_хост>
DB_PORT=<ваш_порт>
DB_NAME=<ваша_база_данных>
```

___

## Работа с API

### Создание нового поста

#### URL: /posts

#### Метод: POST

#### Тело запроса:

`{
  "title": "Заголовок поста",
  "content": "Содержимое поста"}`

#### Ответ:

Статус 200 при успешном создании поста.
Статус 500 в случае ошибки.


### Изменение поста

#### URL: /posts/{id}

#### Метод: PUT

#### Параметры:

_id (int): ID поста для обновления.
Тело запроса:_

`{
  "title": "Новый заголовок",
  "content": "Новое содержимое"}
`

#### Ответ:

Статус 200 при успешном обновлении поста.
Статус 500 в случае ошибки.


### Удаление поста

#### URL: /posts/{id}

#### Метод: DELETE

#### Параметры:

_id (int): ID поста для удаления._

#### Ответ:
Статус 200 при успешном удалении поста.
Статус 500 в случае ошибки.


### Получение поста

#### URL: /posts/{id}

#### Метод: GET

#### Параметры:

_id (int): ID поста для получения._

#### Ответ:

Статус 200 с данными поста.
Статус 500 в случае ошибки.


### Получение всех постов

#### URL: /posts

#### Метод: GET

#### Ответ:

Статус 200 со списком всех постов.
Статус 500 в случае ошибки.


### Поставить лайк на пост

#### URL: /posts/{id}/like

#### Метод: POST

#### Параметры:

_id (int): ID поста для лайка._

#### Ответ:

Статус 200 при успешном лайке.
Статус 500 в случае ошибки.

### Убрать лайк с поста

#### URL: /posts/{id}/like

#### Метод: DELETE

#### Параметры:

_id (int): ID поста для удаления лайка._

#### Ответ:

Статус 200 при успешном удалении лайка.
Статус 500 в случае ошибки.
___

## Тестирование 
Для тестирования API используйте **pytest**. Убедитесь, что у вас настроена тестовая база данных и выполните команду:

`pytest tests.py`

**!Важно находиться при этом в директории /testapi!**
___

## Развёртывание через Docker

* Файл Dockerfile можно не трогать и никак не изменять

* Для docker-compose советуется создать отдельный .env файл со всеми данными к БД.
```
DB_HOST=db
DB_PORT=<ваш_порт>
DB_NAME=<ваша_база_данных>
DB_USER=<ваш_пользователь>
DB_PASS=<ваш_пароль>

POSTGRES_DB=<ваша_база_данных>
POSTGRES_USER=<ваш_пользователь>
POSTGRES_PASSWORD=<ваш_пароль>
```

___

## Документация Swagger

Документация **swagger**: http://127.0.0.1:8000/docs

Документация **redoc**: http://127.0.0.1:8000/redoc/